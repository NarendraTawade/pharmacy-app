"use strict";(self.webpackChunkpharmacy_management_app=self.webpackChunkpharmacy_management_app||[]).push([[316],{3316:(f,p,c)=>{c.r(p),c.d(p,{InvoiceModule:()=>y});var d=c(9808),u=c(459),t=c(1223),v=c(611);function g(o,i){if(1&o&&(t.TgZ(0,"option",14),t._uU(1),t.qZA()),2&o){const e=i.$implicit;t.Q6J("value",e.shopName),t.xp6(1),t.Oqu(e.shopName)}}function _(o,i){if(1&o&&(t.TgZ(0,"option",14),t._uU(1),t.qZA()),2&o){const e=i.$implicit;t.Q6J("value",e.id),t.xp6(1),t.Oqu(e.name)}}function Z(o,i){if(1&o&&(t.TgZ(0,"tr")(1,"th",15),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.qZA(),t.TgZ(9,"td"),t._uU(10),t.qZA(),t.TgZ(11,"td"),t._uU(12),t.qZA()()),2&o){const e=i.$implicit,n=i.index;t.xp6(2),t.Oqu(n),t.xp6(2),t.Oqu(e.name),t.xp6(2),t.Oqu(e.qty),t.xp6(2),t.Oqu(e.mrp),t.xp6(2),t.Oqu(e.rate),t.xp6(2),t.Oqu(e.amount)}}let m=(()=>{class o{constructor(e,n){this._sharedService=e,this._cd=n,this.billArray=[],this.billAmount=0,this.totalAmount=0}ngOnInit(){this.getRetailers(),this.getProducts()}getRetailers(){this._sharedService.getReatilersList().subscribe({next:e=>{console.log(e),this.retailersList=e},error:e=>{console.log(e)}})}getProducts(){this._sharedService.getProducts().subscribe(e=>{this.productsData=e,console.log(this.productsData)})}getProductbyId(e){this._sharedService.getProductbyId(e).subscribe(n=>{console.log(n),this.productById=n,console.log(this.productById.rate),this.rate=this.productById.rate,this.mrp=this.productById.mrp})}update(e){console.log(e),this.getProductbyId(e.target.value)}updateRetailerName(e){console.log(e.target.value),this.retailerShopName=e.target.value,console.log(this.retailerShopName)}addItem(e,n){var l,a,r,s;if(console.log(e,n),""==e.value||""==n.value)alert("Please ensure correct name and quantity");else{const C={name:null===(l=this.productById)||void 0===l?void 0:l.name,qty:null==n?void 0:n.value,mrp:null===(a=this.productById)||void 0===a?void 0:a.mrp,rate:null===(r=this.productById)||void 0===r?void 0:r.rate,amount:(null===(s=this.productById)||void 0===s?void 0:s.rate)*(null==n?void 0:n.value)};this.billArray.push(C),this._cd.detectChanges(),console.log(this.billArray),this.billArray.forEach(h=>{this.billAmount=h.rate*h.qty}),this.totalAmount=this.billAmount+this.totalAmount,console.log(this.totalAmount)}}createInvoice(){this._sharedService.createInvoice(this.billArray).subscribe({next:e=>{},error:()=>{alert("Error while adding product!")}})}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(v.F),t.Y36(t.sBO))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-create-invoice"]],decls:42,vars:5,consts:[[1,"p-4"],["name","product","id","product",3,"change"],["retailerName",""],["selected","","value",""],[3,"value",4,"ngFor","ngForOf"],["productname",""],["type","number"],["quantity",""],["type","button",3,"click"],[1,"pt-3"],[1,"table"],["scope","col"],[4,"ngFor","ngForOf"],[1,"btn","btn-primary",3,"click"],[3,"value"],["scope","row"]],template:function(e,n){if(1&e){const l=t.EpF();t.TgZ(0,"div")(1,"form")(2,"div",0)(3,"select",1,2),t.NdJ("change",function(r){return n.updateRetailerName(r)}),t.TgZ(5,"option",3),t._uU(6,"---Please Select From Dropdown---"),t.qZA(),t.YNc(7,g,2,2,"option",4),t.qZA()(),t.TgZ(8,"div",0)(9,"select",1,5),t.NdJ("change",function(r){return n.update(r)}),t.TgZ(11,"option",3),t._uU(12,"---Please Select From Dropdown---"),t.qZA(),t.YNc(13,_,2,2,"option",4),t.qZA()(),t.TgZ(14,"div",0),t._UZ(15,"input",6,7),t.qZA(),t.TgZ(17,"button",8),t.NdJ("click",function(){t.CHM(l);const r=t.MAs(10),s=t.MAs(16);return n.addItem(r,s)}),t._uU(18,"Add"),t.qZA()()(),t.TgZ(19,"div",9)(20,"h3"),t._uU(21),t.qZA()(),t.TgZ(22,"table",10)(23,"thead")(24,"tr")(25,"th",11),t._uU(26,"Sr. No."),t.qZA(),t.TgZ(27,"th",11),t._uU(28,"Product"),t.qZA(),t.TgZ(29,"th",11),t._uU(30,"Qty"),t.qZA(),t.TgZ(31,"th",11),t._uU(32,"MRP"),t.qZA(),t.TgZ(33,"th",11),t._uU(34,"Rate"),t.qZA(),t.TgZ(35,"th",11),t._uU(36,"Amount"),t.qZA()()(),t.TgZ(37,"tbody"),t.YNc(38,Z,13,6,"tr",12),t.qZA()(),t.TgZ(39,"div")(40,"button",13),t.NdJ("click",function(){return n.createInvoice()}),t._uU(41),t.qZA()()}2&e&&(t.xp6(7),t.Q6J("ngForOf",n.retailersList),t.xp6(6),t.Q6J("ngForOf",n.productsData),t.xp6(8),t.hij("Retailer Name : ",n.retailerShopName,""),t.xp6(17),t.Q6J("ngForOf",n.billArray),t.xp6(3),t.hij("Total Bill Amount : ",n.totalAmount,""))},directives:[d.sg],styles:[""]}),o})();const A=[{path:"",component:(()=>{class o{constructor(){}ngOnInit(){}}return o.\u0275fac=function(e){return new(e||o)},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-invoice-container"]],decls:1,vars:0,template:function(e,n){1&e&&t._UZ(0,"router-outlet")},directives:[u.lC],styles:[""]}),o})(),children:[{path:"",component:m},{path:"create-invoice",component:m}]}];let I=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[[u.Bz.forChild(A)],u.Bz]}),o})(),y=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[[d.ez,I]]}),o})()}}]);